# Замын Хөдөлгөөн Хянах ба Удирдах Систем

Энэхүү систем нь автозамын түгжрэлийг тодорхойлж, гэрлэн дохионы удирдлагаар дамжуулан хөдөлгөөнийг зохицуулах зориулалттай. Систем нь камерын тусламжтайгаар машин тоолох, түгжрэлийн түвшин тогтоох, гэрлэн дохио удирдах гурван үндсэн модулиас бүрдэнэ.

## Системийн архитектур

Систем нь дараах 3 үндсэн модулиас бүрдэнэ:

1. **Тээврийн хэрэгсэл тоолох модуль (Python)**: 
   - Камерын дүрс боловсруулалт хийж тээврийн хэрэгсэл илрүүлэх
   - ROI (Region of Interest) буюу тоолох бүсийг тодорхойлох
   - Тээврийн хэрэгслийн чиглэл болон тоог тодорхойлох

2. **Түгжрэлийн түвшин шинжлэх модуль (Python)**: 
   - Тоологдсон машины өгөгдөлд үндэслэн түгжрэлийн түвшинг тодорхойлох
   - RestAPI хэлбэрээр мэдээллийг гадагш дамжуулах
   - Статистик мэдээлэл хадгалах, боловсруулах

3. **Гэрлэн дохио удирдах модуль (Node.js)**:
   - Гэрлэн дохионы хугацааг авто/гар аргаар удирдах
   - Түгжрэлийн түвшингээс хамаарч гэрлэн дохионы хугацааг автоматаар тохируулах
   - Хяналтын вэб интерфэйс

## Шаардлагууд

### Python модуль
- Python 3.8+
- OpenCV
- YOLO (YOLOv8)
- DeepSort
- FastAPI
- Pandas, NumPy
- Асаалттай камер эсвэл видео файл

### Node.js модуль
- Node.js 14+
- Express
- Socket.IO
- MQTT (тэмдэг дамжуулах)

## Суулгах зааварчилгаа

1. Репозиторийг клонлох:
```
git clone https://github.com/your-repo/traffic-control-system.git
cd traffic-control-system
```

2. Python хамаарлуудыг суулгах:
```
pip install -r requirements.txt
```

3. Node.js хамаарлуудыг суулгах:
```
npm install
```

4. YOLO загвар татах:
```
# yolov8n.pt автоматаар татагдана
```

## Ажиллуулах зааварчилгаа

### Бүх модулийг хамт ажиллуулах
```
python src/main.py --video video.mp4
```

### Параметрүүд
```
--video        Видео файлын зам (заагаагүй бол камераас авна)
--no-display   Видеог харуулахгүй байх (сервер горимд)
--api-port     Түгжрэлийн API-н порт (үндсэн: 8000)
--controller-port  Гэрлэн дохио удирдлагын порт (үндсэн: 3000)
```

### Хяналтын самбар
Гэрлэн дохионы хяналтын самбарт хандахын тулд вэб хөтөч дээр:
```
http://localhost:3000
```

## API лавлагаа

### Түгжрэлийн API
- `GET /api/congestion/current` - Одоогийн түгжрэлийн түвшин авах
- `GET /api/analysis/latest` - Хамгийн сүүлийн шинжилгээний үр дүн авах
- `GET /api/analysis/history` - Шинжилгээний түүх авах

### Гэрлэн дохио удирдлагын API
- `GET /api/lights` - Бүх гэрлэн дохионы мэдээлэл авах
- `POST /api/lights/control` - Гэрлэн дохио удирдах

## Хөгжүүлэгчид

- Ө.Баяраа - Тээврийн хэрэгсэл тоолох модуль
- Л.Чинзориг - Түгжрэлийн түвшин шинжлэх модуль
- Д.Бат-Эрдэнэ - Гэрлэн дохио удирдах модуль

## Лиценз

MIT # traffic_balancer
